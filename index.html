<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Espresso World Map – Stable Preview</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Merriweather:wght@700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/leaflet@1.9.4/dist/leaflet.css" />
  <style>
    body{margin:0;background:#F5EFE7;color:#2A1F17;font-family:Inter,ui-sans-serif,system-ui;}
    .wrap{max-width:1152px;margin:0 auto;padding:20px;}
    .brand{display:flex;align-items:center;gap:12px;margin:8px 0 18px}
    .brand .dot{width:28px;height:28px;border-radius:10px;background:#C28B5B}
    h1{font-family:Merriweather,serif;font-size:28px;margin:0}
    h2{font-family:Merriweather,serif;font-size:22px;margin:18px 0 10px}
    p.sub{opacity:.9;margin:6px 0 18px}
    #map{height:520px;width:100%;border:1px solid #D7C7B6;border-radius:16px;overflow:hidden;box-shadow:0 6px 24px rgba(0,0,0,.06)}
    .placeholder{display:flex;align-items:center;justify-content:center;height:520px;border:1px dashed #D7C7B6;border-radius:16px;color:#8b6f5a;background:rgba(0,0,0,0.02)}
    .cards{display:grid;grid-template-columns:1fr;gap:16px}
    .card{position:relative;border-radius:18px;overflow:hidden;border:1px solid #D7C7B6;box-shadow:0 8px 24px rgba(0,0,0,.06);background:#fff}
    .card .image{height:200px;background:#e8dccb url('') center/cover no-repeat}
    .card .overlay{position:absolute;inset:auto 0 0 0;padding:18px;background:linear-gradient(180deg,rgba(0,0,0,0) 0%,rgba(0,0,0,.35) 60%,rgba(0,0,0,.55) 100%);color:#fff}
    .label{display:inline-block;padding:4px 8px;border-radius:999px;font-size:12px;color:#fff}
    .label.upcoming{background:#E0A265}
    .label.past{background:#8C6A4A}
    .list{background:#fff;border:1px solid #D7C7B6;border-radius:16px;overflow:hidden}
    .row{display:grid;grid-template-columns:1fr auto;gap:12px;align-items:center;padding:14px 16px;border-bottom:1px solid #D7C7B6}
    .row:last-child{border-bottom:none}
  </style>
</head>
<body>
  <div class="wrap">
    <div class="brand"><div class="dot"></div><h1>Espresso World Map</h1></div>
    <p class="sub">Highlighting where Espresso has been and where we’re going next.</p>
    <div id="map"></div>
    <div class="section">
      <h2>Upcoming Events</h2>
      <div id="upcomingCards" class="cards"></div>
    </div>
    <div class="section">
      <h2>Past Events</h2>
      <div id="pastList" class="list"></div>
    </div>
  </div>
  <script src="https://cdn.jsdelivr.net/npm/leaflet@1.9.4/dist/leaflet.js"></script>
  <script>
    const EVENTS=[
      { city:'Denver',country:'USA',status:'past',coords:[39.7392,-104.9903] },
      { city:'San Francisco',country:'USA',status:'past',coords:[37.7749,-122.4194] },
      { city:'New York',country:'USA',status:'past',coords:[40.7128,-74.0060] },
      { city:'Cannes',country:'France',status:'past',coords:[43.5528,7.0174] },
      { city:'Bangkok',country:'Thailand',status:'past',coords:[13.7563,100.5018] },
      { city:'Brussels',country:'Belgium',status:'past',coords:[50.8503,4.3517] },
      { city:'Berlin',country:'Germany',status:'past',coords:[52.52,13.4050] },
      { city:'Seoul',country:'Korea',status:'upcoming',coords:[37.5665,126.9780],img:'' },
      { city:'Buenos Aires',country:'Argentina',status:'upcoming',coords:[-34.6037,-58.3816],img:'' }
    ];
    document.addEventListener('DOMContentLoaded',()=>{
      try{
        const map=L.map('map').setView([20,10],2);
        L.tileLayer('https://tile.openstreetmap.org/{z}/{x}/{y}.png',{attribution:'&copy; OpenStreetMap'}).addTo(map);
        EVENTS.forEach(e=>{
          L.circleMarker(e.coords,{radius:8,color:e.status==='past'?'#8C6A4A':'#E0A265',fillOpacity:.85}).addTo(map).bindTooltip(e.city+', '+e.country);
        });
      }catch(err){
        document.getElementById('map').outerHTML='<div class="placeholder">Map preview unavailable. Lists still work.</div>';
      }
      renderUpcoming(); renderPast();
    });
    function renderUpcoming(){
      const root=document.getElementById('upcomingCards');
      EVENTS.filter(e=>e.status==='upcoming').forEach(e=>{
        const el=document.createElement('div');el.className='card';
        el.innerHTML='<div class="image"></div><div class="overlay"><div class="label upcoming">Upcoming</div><h3>'+e.city+'</h3><div>'+e.country+'</div></div>';
        root.appendChild(el);
      });
    }
    function renderPast(){
      const root=document.getElementById('pastList');
      EVENTS.filter(e=>e.status==='past').forEach(e=>{
        const row=document.createElement('div');row.className='row';
        row.innerHTML='<div><div>'+e.city+'</div><div style="opacity:.75;font-size:13px">'+e.country+'</div></div><div><span class="label past">Past</span></div>';
        root.appendChild(row);
      });
    }
  </script>
</body>
</html>
